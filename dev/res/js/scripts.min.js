(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

/* eslint-disable compat/compat */
var url = 'https://private-9d5e37a-testassignment.apiary-mock.com/get-bears';
var list = document.querySelector('.item-wrapper');
var checkbox = document.querySelector('.checkbox');

function showReserveItem(listItem, className) {
  for (var i = 0; i < list.children.length; i += 1) {
    if (!listItem.children[i].className.includes(className)) {
      listItem.children[i].style.display = 'none';
    }
  }
}

function changeFilterValue(item, value) {
  item.dataset.filter = value;
}

function hideItem(item) {
  item.style.display = 'none';
}

function hideChildrenItem(items) {
  for (var i = 0; i < items.children.length; i += 1) {
    hideItem(items.children[i]);
  }
}

function showItem(item, styleValue) {
  item.style.display = styleValue;
}

function showFilterItem(items, filterStatus) {
  for (var i = 0; i < items.children.length; i += 1) {
    if (items.children[i].getAttribute('data-filter') === filterStatus) {
      showItem(items.children[i], 'flex');
    }
  }
}

function showAllItem(listItem) {
  for (var i = 0; i < listItem.children.length; i += 1) {
    listItem.children[i].style.display = 'flex';
  }
}

function postData(item, button, link, filterValue) {
  fetch(link, {
    method: 'POST'
  }).then(function (res) {
    if (res.status === 200) {
      hideItem(item);
      hideItem(button.parentNode);
      changeFilterValue(item, filterValue);
    }
  });
}

function getData(urlLink) {
  return fetch(urlLink).then(function (response) {
    return response.json();
  });
}

function createItem(item) {
  list.innerHTML += "\n        <div data-filter=\"all\" id=\"".concat(item.id, "\" class=\"item ").concat(item.in_reserve ? 'item--reserve' : '', "\">\n        <div class=\"item__img\"><img src=\"").concat(item.image_url, "\" alt=\"\"></div>\n        <div class=\"item__info\">\n            <div class=\"item__title\">").concat(item.name, "</div>\n            <div class=\"item__type\">").concat(item.type, "</div>\n            <div class=\"item__gender\">").concat(item.gender, "</div>\n        </div>\n        <button id=\"accept\" class=\"btn btn-accept\">\u041F\u0440\u0438\u043D\u044F\u0442\u044C</button>\n        <button id=\"reject\" class=\"btn btn-reject\">\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C</button>\n</div>");
}

function createData(data) {
  for (var i = 0; i < data.length; i += 1) {
    var item = data[i];
    createItem(item);
  }
}

checkbox.addEventListener('change', function () {
  if (checkbox.checked) {
    showReserveItem(list, 'reserve');
  } else {
    showAllItem(list);
  }
});

var selectbox = _toConsumableArray(document.querySelectorAll('.select-box__input'));

selectbox.forEach(function (element) {
  return element.addEventListener('change', function () {
    var status = element.value;

    if (status === 'accept') {
      hideChildrenItem(list);
      showFilterItem(list, 'accept');
    } else if (status === 'reject') {
      hideChildrenItem(list);
      showFilterItem(list, 'reject');
    } else if (status === 'all') {
      hideChildrenItem(list);
      showFilterItem(list, 'all');
    }
  });
});
document.addEventListener('click', function (event) {
  if (event.target.matches('button')) {
    var button = event.target;
    var itemId = button.parentNode.id;
    var item = button.parentNode;
    var acceptLink = "https://private-9d5e37a-testassignment.apiary-mock.com/resolve-bear?id=".concat(itemId);
    var rejectLink = "https://private-9d5e37a-testassignment.apiary-mock.com/reject-bear?id=".concat(itemId);

    if (button.id === 'accept') {
      postData(item, button, acceptLink, 'accept');
    } else if (button.id === 'reject') {
      postData(item, button, rejectLink, 'reject');
    }
  }
});
getData(url).then(function (data) {
  return createData(data.results.data);
}).catch(function (err) {
  throw err;
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXYvcmVzL2pzLWRldi9zY3JpcHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7QUNBQTtBQUNBLElBQU0sR0FBRyxHQUFHLGtFQUFaO0FBQ0EsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsZUFBdkIsQ0FBYjtBQUNBLElBQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFdBQXZCLENBQWpCOztBQUVBLFNBQVMsZUFBVCxDQUF5QixRQUF6QixFQUFtQyxTQUFuQyxFQUE4QztBQUM1QyxPQUFLLElBQUksQ0FBQyxHQUFHLENBQWIsRUFBZ0IsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFMLENBQWMsTUFBbEMsRUFBMEMsQ0FBQyxJQUFJLENBQS9DLEVBQWtEO0FBQ2hELFFBQUksQ0FBQyxRQUFRLENBQUMsUUFBVCxDQUFrQixDQUFsQixFQUFxQixTQUFyQixDQUErQixRQUEvQixDQUF3QyxTQUF4QyxDQUFMLEVBQXlEO0FBQ3ZELE1BQUEsUUFBUSxDQUFDLFFBQVQsQ0FBa0IsQ0FBbEIsRUFBcUIsS0FBckIsQ0FBMkIsT0FBM0IsR0FBcUMsTUFBckM7QUFDRDtBQUNGO0FBQ0Y7O0FBRUQsU0FBUyxpQkFBVCxDQUEyQixJQUEzQixFQUFpQyxLQUFqQyxFQUF3QztBQUN0QyxFQUFBLElBQUksQ0FBQyxPQUFMLENBQWEsTUFBYixHQUFzQixLQUF0QjtBQUNEOztBQUVELFNBQVMsUUFBVCxDQUFrQixJQUFsQixFQUF3QjtBQUN0QixFQUFBLElBQUksQ0FBQyxLQUFMLENBQVcsT0FBWCxHQUFxQixNQUFyQjtBQUNEOztBQUVELFNBQVMsZ0JBQVQsQ0FBMEIsS0FBMUIsRUFBaUM7QUFDL0IsT0FBSyxJQUFJLENBQUMsR0FBRyxDQUFiLEVBQWdCLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBTixDQUFlLE1BQW5DLEVBQTJDLENB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NEI7QUFDMUIsTUFBQSxRQUFRLENBQUMsSUFBRCxFQUFPLE1BQVAsRUFBZSxVQUFmLEVBQTJCLFFBQTNCLENBQVI7QUFDRCxLQUZELE1BRU8sSUFBSSxNQUFNLENBQUMsRUFBUCxLQUFjLFFBQWxCLEVBQTRCO0FBQ2pDLE1BQUEsUUFBUSxDQUFDLElBQUQsRUFBTyxNQUFQLEVBQWUsVUFBZixFQUEyQixRQUEzQixDQUFSO0FBQ0Q7QUFDRjtBQUNGLENBYkQ7QUFlQSxPQUFPLENBQUMsR0FBRCxDQUFQLENBQ0csSUFESCxDQUNRLFVBQUEsSUFBSTtBQUFBLFNBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFMLENBQWEsSUFBZCxDQUFkO0FBQUEsQ0FEWixFQUVHLEtBRkgsQ0FFUyxVQUFDLEdBQUQsRUFBUztBQUNkLFFBQU0sR0FBTjtBQUNELENBSkgiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKiBlc2xpbnQtZGlzYWJsZSBjb21wYXQvY29tcGF0ICovXG5jb25zdCB1cmwgPSAnaHR0cHM6Ly9wcml2YXRlLTlkNWUzN2EtdGVzdGFzc2lnbm1lbnQuYXBpYXJ5LW1vY2suY29tL2dldC1iZWFycyc7XG5jb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLml0ZW0td3JhcHBlcicpO1xuY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlY2tib3gnKTtcblxuZnVuY3Rpb24gc2hvd1Jlc2VydmVJdGVtKGxpc3RJdGVtLCBjbGFzc05hbWUpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0LmNoaWxkcmVuLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKCFsaXN0SXRlbS5jaGlsZHJlbltpXS5jbGFzc05hbWUuaW5jbHVkZXMoY2xhc3NOYW1lKSkge1xuICAgICAgbGlzdEl0ZW0uY2hpbGRyZW5baV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hhbmdlRmlsdGVyVmFsdWUoaXRlbSwgdmFsdWUpIHtcbiAgaXRlbS5kYXRhc2V0LmZpbHRlciA9IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBoaWRlSXRlbShpdGVtKSB7XG4gIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbn1cblxuZnVuY3Rpb24gaGlkZUNoaWxkcmVuSXRlbShpdGVtcykge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmNoaWxkcmVuLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaGlkZUl0ZW0oaXRlbXMuY2hpbGRyZW5baV0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNob3dJdGVtKGl0ZW0sIHN0eWxlVmFsdWUpIHtcbiAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gc3R5bGVWYWx1ZTtcbn1cblxuZnVuY3Rpb24gc2hvd0ZpbHRlckl0ZW0oaXRlbXMsIGZpbHRlclN0YXR1cykge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmNoaWxkcmVuLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKGl0ZW1zLmNoaWxkcmVuW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1maWx0ZXInKSA9PT0gZmlsdGVyU3RhdHVzKSB7XG4gICAgICBzaG93SXRlbShpdGVtcy5jaGlsZHJlbltpXSwgJ2ZsZXgnKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2hvd0FsbEl0ZW0obGlzdEl0ZW0pIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0SXRlbS5jaGlsZHJlbi5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGxpc3RJdGVtLmNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gIH1cbn1cblxuZnVuY3Rpb24gcG9zdERhdGEoaXRlbSwgYnV0dG9uLCBsaW5rLCBmaWx0ZXJWYWx1ZSkge1xuICBmZXRjaChsaW5rLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgIGhpZGVJdGVtKGl0ZW0pO1xuICAgICAgaGlkZUl0ZW0oYnV0dG9uLnBhcmVudE5vZGUpO1xuICAgICAgY2hhbmdlRmlsdGVyVmFsdWUoaXRlbSwgZmlsdGVyVmFsdWUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldERhdGEodXJsTGluaykge1xuICByZXR1cm4gZmV0Y2godXJsTGluaykudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVJdGVtKGl0ZW0pIHtcbiAgbGlzdC5pbm5lckhUTUwgKz0gYFxuICAgICAgICA8ZGl2IGRhdGEtZmlsdGVyPVwiYWxsXCIgaWQ9XCIke2l0ZW0uaWR9XCIgY2xhc3M9XCJpdGVtICR7XG4gIGl0ZW0uaW5fcmVzZXJ2ZSA/ICdpdGVtLS1yZXNlcnZlJyA6ICcnXG59XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtX19pbWdcIj48aW1nIHNyYz1cIiR7aXRlbS5pbWFnZV91cmx9XCIgYWx0PVwiXCI+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtX19pbmZvXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbV9fdGl0bGVcIj4ke2l0ZW0ubmFtZX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtX190eXBlXCI+JHtpdGVtLnR5cGV9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbV9fZ2VuZGVyXCI+JHtpdGVtLmdlbmRlcn08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxidXR0b24gaWQ9XCJhY2NlcHRcIiBjbGFzcz1cImJ0biBidG4tYWNjZXB0XCI+0J/RgNC40L3Rj9GC0Yw8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cInJlamVjdFwiIGNsYXNzPVwiYnRuIGJ0bi1yZWplY3RcIj7QntGC0LrQu9C+0L3QuNGC0Yw8L2J1dHRvbj5cbjwvZGl2PmA7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURhdGEoZGF0YSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBpdGVtID0gZGF0YVtpXTtcbiAgICBjcmVhdGVJdGVtKGl0ZW0pO1xuICB9XG59XG5cbmNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICBzaG93UmVzZXJ2ZUl0ZW0obGlzdCwgJ3Jlc2VydmUnKTtcbiAgfSBlbHNlIHtcbiAgICBzaG93QWxsSXRlbShsaXN0KTtcbiAgfVxufSk7XG5cbmNvbnN0IHNlbGVjdGJveCA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VsZWN0LWJveF9faW5wdXQnKV07XG5zZWxlY3Rib3guZm9yRWFjaChlbGVtZW50ID0+IGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICBjb25zdCBzdGF0dXMgPSBlbGVtZW50LnZhbHVlO1xuICBpZiAoc3RhdHVzID09PSAnYWNjZXB0Jykge1xuICAgIGhpZGVDaGlsZHJlbkl0ZW0obGlzdCk7XG4gICAgc2hvd0ZpbHRlckl0ZW0obGlzdCwgJ2FjY2VwdCcpO1xuICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3JlamVjdCcpIHtcbiAgICBoaWRlQ2hpbGRyZW5JdGVtKGxpc3QpO1xuICAgIHNob3dGaWx0ZXJJdGVtKGxpc3QsICdyZWplY3QnKTtcbiAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdhbGwnKSB7XG4gICAgaGlkZUNoaWxkcmVuSXRlbShsaXN0KTtcbiAgICBzaG93RmlsdGVySXRlbShsaXN0LCAnYWxsJyk7XG4gIH1cbn0pKTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCdidXR0b24nKSkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBpdGVtSWQgPSBidXR0b24ucGFyZW50Tm9kZS5pZDtcbiAgICBjb25zdCBpdGVtID0gYnV0dG9uLnBhcmVudE5vZGU7XG4gICAgY29uc3QgYWNjZXB0TGluayA9IGBodHRwczovL3ByaXZhdGUtOWQ1ZTM3YS10ZXN0YXNzaWdubWVudC5hcGlhcnktbW9jay5jb20vcmVzb2x2ZS1iZWFyP2lkPSR7aXRlbUlkfWA7XG4gICAgY29uc3QgcmVqZWN0TGluayA9IGBodHRwczovL3ByaXZhdGUtOWQ1ZTM3YS10ZXN0YXNzaWdubWVudC5hcGlhcnktbW9jay5jb20vcmVqZWN0LWJlYXI/aWQ9JHtpdGVtSWR9YDtcbiAgICBpZiAoYnV0dG9uLmlkID09PSAnYWNjZXB0Jykge1xuICAgICAgcG9zdERhdGEoaXRlbSwgYnV0dG9uLCBhY2NlcHRMaW5rLCAnYWNjZXB0Jyk7XG4gICAgfSBlbHNlIGlmIChidXR0b24uaWQgPT09ICdyZWplY3QnKSB7XG4gICAgICBwb3N0RGF0YShpdGVtLCBidXR0b24sIHJlamVjdExpbmssICdyZWplY3QnKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5nZXREYXRhKHVybClcbiAgLnRoZW4oZGF0YSA9PiBjcmVhdGVEYXRhKGRhdGEucmVzdWx0cy5kYXRhKSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICB0aHJvdyBlcnI7XG4gIH0pO1xuIl19
