(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

/* eslint-disable compat/compat */
var url = 'https://private-9d5e37a-testassignment.apiary-mock.com/get-bears';
var list = document.querySelector('.item-wrapper');
var checkbox = document.querySelector('.checkbox');

function showReserveItem(listItem, className) {
  for (var i = 0; i < list.children.length; i += 1) {
    if (!listItem.children[i].className.includes(className)) {
      listItem.children[i].style.display = 'none';
    }
  }
}

function changeFilterValue(item, value) {
  item.dataset.filter = value;
}

function hideItem(item) {
  item.style.display = 'none';
}

function hideChildrenItem(items) {
  for (var i = 0; i < items.children.length; i += 1) {
    hideItem(items.children[i]);
  }
}

function showItem(item, styleValue) {
  item.style.display = styleValue;
}

function showFilterItem(items, filterStatus) {
  for (var i = 0; i < items.children.length; i += 1) {
    if (items.children[i].getAttribute('data-filter') === filterStatus) {
      showItem(items.children[i], 'flex');
    }
  }
}

function showAllItem(listItem) {
  for (var i = 0; i < listItem.children.length; i += 1) {
    listItem.children[i].style.display = 'flex';
  }
}

function postData(item, button, link, filterValue) {
  fetch(link, {
    method: 'POST'
  }).then(function (res) {
    if (res.status === 200) {
      hideItem(item);
      hideItem(button.parentNode);
      postData(link, item);
      changeFilterValue(item, filterValue);
    }
  });
}

function getData(urlLink) {
  return fetch(urlLink).then(function (response) {
    return response.json();
  });
}

function createReserveItem(data, element, index) {
  element.innerHTML += "\n        <div data-filter=\"all\" id=\"".concat(data[index].id, "\" class=\"item item--reserve\">\n        <div class=\"item__img\"><img src=\"").concat(data[index].image_url, "\" alt=\"\"></div>\n        <div class=\"item__title-reserve\">\u0412 \u0437\u0430\u043F\u043E\u0432\u0435\u0434\u043D\u0438\u043A\u0435</div>\n        <div class=\"item__info\">\n            <div class=\"item__title\">").concat(data[index].name, "</div>\n            <div class=\"item__type\">").concat(data[index].type, "</div>\n            <div class=\"item__gender\">").concat(data[index].gender, "</div>\n        </div>\n        <button id=\"accept\" class=\"btn btn-accept\">\u041F\u0440\u0438\u043D\u044F\u0442\u044C</button>\n        <button id=\"reject\" class=\"btn btn-reject\">\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C</button>\n</div>");
}

function createSimpleItem(data, element, index) {
  element.innerHTML += "\n        <div data-filter=\"all\" id=\"".concat(data[index].id, "\" class=\"item\">\n        <div class=\"item__img\"><img src=\"").concat(data[index].image_url, "\" alt=\"\"></div>\n        <div class=\"item__info\">\n            <div class=\"item__title\">").concat(data[index].name, "</div>\n            <div class=\"item__type\">").concat(data[index].type, "</div>\n            <div class=\"item__gender\">").concat(data[index].gender, "</div>\n        </div>\n        <button id=\"accept\" class=\"btn btn-accept\">\u041F\u0440\u0438\u043D\u044F\u0442\u044C</button>\n        <button id=\"reject\" class=\"btn btn-reject\">\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C</button>\n    </div>");
}

function createData(data) {
  for (var i = 0; i < data.length; i += 1) {
    if (data[i].in_reserve) {
      createReserveItem(data, list, i);
    } else {
      createSimpleItem(data, list, i);
    }
  }
}

checkbox.addEventListener('change', function () {
  if (checkbox.checked) {
    showReserveItem(list, 'reserve');
  } else {
    showAllItem(list);
  }
});
document.addEventListener('click', function (event) {
  if (event.target.matches('.select-box__list label')) {
    var status = event.target.getAttribute('data-filter');

    if (status === 'accept') {
      hideChildrenItem(list);
      showFilterItem(list, 'accept');
    } else if (status === 'reject') {
      hideChildrenItem(list);
      showFilterItem(list, 'reject');
    } else if (status === 'all') {
      hideChildrenItem(list);
      showFilterItem(list, 'all');
    }
  }
});
document.addEventListener('click', function (event) {
  if (event.target.matches('button')) {
    var button = event.target;
    var itemId = button.parentNode.id;
    var item = button.parentNode.parentNode;
    var acceptLink = "https://private-9d5e37a-testassignment.apiary-mock.com/resolve-bear?id=".concat(itemId);
    var rejectLink = "https://private-9d5e37a-testassignment.apiary-mock.com/reject-bear?id=".concat(itemId);

    if (button.id === 'accept') {
      postData(item, button, acceptLink, 'accept');
    } else if (button.id === 'reject') {
      postData(item, button, rejectLink, 'reject');
    }
  }
});
getData(url).then(function (data) {
  return createData(data.results.data);
}).catch(function (err) {
  throw err;
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXYvcmVzL2pzLWRldi9zY3JpcHRzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTtBQUNBLElBQU0sR0FBRyxHQUFHLGtFQUFaO0FBQ0EsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsZUFBdkIsQ0FBYjtBQUNBLElBQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFdBQXZCLENBQWpCOztBQUVBLFNBQVMsZUFBVCxDQUF5QixRQUF6QixFQUFtQyxTQUFuQyxFQUE4QztBQUM1QyxPQUFLLElBQUksQ0FBQyxHQUFHLENBQWIsRUFBZ0IsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFMLENBQWMsTUFBbEMsRUFBMEMsQ0FBQyxJQUFJLENBQS9DLEVBQWtEO0FBQ2hELFFBQUksQ0FBQyxRQUFRLENBQUMsUUFBVCxDQUFrQixDQUFsQixFQUFxQixTQUFyQixDQUErQixRQUEvQixDQUF3QyxTQUF4QyxDQUFMLEVBQXlEO0FBQ3ZELE1BQUEsUUFBUSxDQUFDLFFBQVQsQ0FBa0IsQ0FBbEIsRUFBcUIsS0FBckIsQ0FBMkIsT0FBM0IsR0FBcUMsTUFBckM7QUFDRDtBQUNGO0FBQ0Y7O0FBRUQsU0FBUyxpQkFBVCxDQUEyQixJQUEzQixFQUFpQyxLQUFqQyxFQUF3QztBQUN0QyxFQUFBLElBQUksQ0FBQyxPQUFMLENBQWEsTUFBYixHQUFzQixLQUF0QjtBQUNEOztBQUVELFNBQVMsUUFBVCxDQUFrQixJQUFsQixFQUF3QjtBQUN0QixFQUFBLElBQUksQ0FBQyxLQUFMLENBQVcsT0FBWCxHQUFxQixNQUFyQjtBQUNEOztBQUVELFNBQVMsZ0JBQVQsQ0FBMEIsS0FBMUIsRUFBaUM7QUFDL0IsT0FBSyxJQUFJLENBQUMsR0FBRyxDQUFiLEVBQWdCLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBTixDQUFlLE1BQW5DLEVBQTJDLENBQUMsSUFBSSxDQUFo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S0FBZixFQUFzQjtBQUMzQixNQUFBLGdCQUFnQixDQUFDLElBQUQsQ0FBaEI7QUFDQSxNQUFBLGNBQWMsQ0FBQyxJQUFELEVBQU8sS0FBUCxDQUFkO0FBQ0Q7QUFDRjtBQUNGLENBZEQ7QUFnQkEsUUFBUSxDQUFDLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLFVBQUMsS0FBRCxFQUFXO0FBQzVDLE1BQUksS0FBSyxDQUFDLE1BQU4sQ0FBYSxPQUFiLENBQXFCLFFBQXJCLENBQUosRUFBb0M7QUFDbEMsUUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQXJCO0FBQ0EsUUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFVBQVAsQ0FBa0IsRUFBakM7QUFDQSxRQUFNLElBQUksR0FBRyxNQUFNLENBQUMsVUFBUCxDQUFrQixVQUEvQjtBQUNBLFFBQU0sVUFBVSxvRkFBNkUsTUFBN0UsQ0FBaEI7QUFDQSxRQUFNLFVBQVUsbUZBQTRFLE1BQTVFLENBQWhCOztBQUVBLFFBQUksTUFBTSxDQUFDLEVBQVAsS0FBYyxRQUFsQixFQUE0QjtBQUMxQixNQUFBLFFBQVEsQ0FBQyxJQUFELEVBQU8sTUFBUCxFQUFlLFVBQWYsRUFBMkIsUUFBM0IsQ0FBUjtBQUNELEtBRkQsTUFFTyxJQUFJLE1BQU0sQ0FBQyxFQUFQLEtBQWMsUUFBbEIsRUFBNEI7QUFDakMsTUFBQSxRQUFRLENBQUMsSUFBRCxFQUFPLE1BQVAsRUFBZSxVQUFmLEVBQTJCLFFBQTNCLENBQVI7QUFDRDtBQUNGO0FBQ0YsQ0FkRDtBQWdCQSxPQUFPLENBQUMsR0FBRCxDQUFQLENBQ0csSUFESCxDQUNRLFVBQUEsSUFBSTtBQUFBLFNBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFMLENBQWEsSUFBZCxDQUFkO0FBQUEsQ0FEWixFQUVHLEtBRkgsQ0FFUyxVQUFDLEdBQUQsRUFBUztBQUFFLFFBQU0sR0FBTjtBQUFZLENBRmhDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyogZXNsaW50LWRpc2FibGUgY29tcGF0L2NvbXBhdCAqL1xuY29uc3QgdXJsID0gJ2h0dHBzOi8vcHJpdmF0ZS05ZDVlMzdhLXRlc3Rhc3NpZ25tZW50LmFwaWFyeS1tb2NrLmNvbS9nZXQtYmVhcnMnO1xuY29uc3QgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pdGVtLXdyYXBwZXInKTtcbmNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoZWNrYm94Jyk7XG5cbmZ1bmN0aW9uIHNob3dSZXNlcnZlSXRlbShsaXN0SXRlbSwgY2xhc3NOYW1lKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5jaGlsZHJlbi5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGlmICghbGlzdEl0ZW0uY2hpbGRyZW5baV0uY2xhc3NOYW1lLmluY2x1ZGVzKGNsYXNzTmFtZSkpIHtcbiAgICAgIGxpc3RJdGVtLmNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNoYW5nZUZpbHRlclZhbHVlKGl0ZW0sIHZhbHVlKSB7XG4gIGl0ZW0uZGF0YXNldC5maWx0ZXIgPSB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gaGlkZUl0ZW0oaXRlbSkge1xuICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59XG5cbmZ1bmN0aW9uIGhpZGVDaGlsZHJlbkl0ZW0oaXRlbXMpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5jaGlsZHJlbi5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGhpZGVJdGVtKGl0ZW1zLmNoaWxkcmVuW2ldKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaG93SXRlbShpdGVtLCBzdHlsZVZhbHVlKSB7XG4gIGl0ZW0uc3R5bGUuZGlzcGxheSA9IHN0eWxlVmFsdWU7XG59XG5cbmZ1bmN0aW9uIHNob3dGaWx0ZXJJdGVtKGl0ZW1zLCBmaWx0ZXJTdGF0dXMpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5jaGlsZHJlbi5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGlmIChpdGVtcy5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZmlsdGVyJykgPT09IGZpbHRlclN0YXR1cykge1xuICAgICAgc2hvd0l0ZW0oaXRlbXMuY2hpbGRyZW5baV0sICdmbGV4Jyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNob3dBbGxJdGVtKGxpc3RJdGVtKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdEl0ZW0uY2hpbGRyZW4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBsaXN0SXRlbS5jaGlsZHJlbltpXS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICB9XG59XG5cblxuZnVuY3Rpb24gcG9zdERhdGEoaXRlbSwgYnV0dG9uLCBsaW5rLCBmaWx0ZXJWYWx1ZSkge1xuICBmZXRjaChsaW5rLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgIGhpZGVJdGVtKGl0ZW0pO1xuICAgICAgaGlkZUl0ZW0oYnV0dG9uLnBhcmVudE5vZGUpO1xuICAgICAgcG9zdERhdGEobGluaywgaXRlbSk7XG4gICAgICBjaGFuZ2VGaWx0ZXJWYWx1ZShpdGVtLCBmaWx0ZXJWYWx1ZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YSh1cmxMaW5rKSB7XG4gIHJldHVybiBmZXRjaCh1cmxMaW5rKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlc2VydmVJdGVtKGRhdGEsIGVsZW1lbnQsIGluZGV4KSB7XG4gIGVsZW1lbnQuaW5uZXJIVE1MICs9IGBcbiAgICAgICAgPGRpdiBkYXRhLWZpbHRlcj1cImFsbFwiIGlkPVwiJHtkYXRhW2luZGV4XS5pZH1cIiBjbGFzcz1cIml0ZW0gaXRlbS0tcmVzZXJ2ZVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbV9faW1nXCI+PGltZyBzcmM9XCIke2RhdGFbaW5kZXhdLmltYWdlX3VybH1cIiBhbHQ9XCJcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW1fX3RpdGxlLXJlc2VydmVcIj7QkiDQt9Cw0L/QvtCy0LXQtNC90LjQutC1PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtX19pbmZvXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbV9fdGl0bGVcIj4ke2RhdGFbaW5kZXhdLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbV9fdHlwZVwiPiR7ZGF0YVtpbmRleF0udHlwZX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtX19nZW5kZXJcIj4ke2RhdGFbaW5kZXhdLmdlbmRlcn08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxidXR0b24gaWQ9XCJhY2NlcHRcIiBjbGFzcz1cImJ0biBidG4tYWNjZXB0XCI+0J/RgNC40L3Rj9GC0Yw8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cInJlamVjdFwiIGNsYXNzPVwiYnRuIGJ0bi1yZWplY3RcIj7QntGC0LrQu9C+0L3QuNGC0Yw8L2J1dHRvbj5cbjwvZGl2PmA7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNpbXBsZUl0ZW0oZGF0YSwgZWxlbWVudCwgaW5kZXgpIHtcbiAgZWxlbWVudC5pbm5lckhUTUwgKz0gYFxuICAgICAgICA8ZGl2IGRhdGEtZmlsdGVyPVwiYWxsXCIgaWQ9XCIke2RhdGFbaW5kZXhdLmlkfVwiIGNsYXNzPVwiaXRlbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbV9faW1nXCI+PGltZyBzcmM9XCIke2RhdGFbaW5kZXhdLmltYWdlX3VybH1cIiBhbHQ9XCJcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW1fX2luZm9cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtX190aXRsZVwiPiR7ZGF0YVtpbmRleF0ubmFtZX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtX190eXBlXCI+JHtkYXRhW2luZGV4XS50eXBlfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW1fX2dlbmRlclwiPiR7ZGF0YVtpbmRleF0uZ2VuZGVyfTwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cImFjY2VwdFwiIGNsYXNzPVwiYnRuIGJ0bi1hY2NlcHRcIj7Qn9GA0LjQvdGP0YLRjDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIGlkPVwicmVqZWN0XCIgY2xhc3M9XCJidG4gYnRuLXJlamVjdFwiPtCe0YLQutC70L7QvdC40YLRjDwvYnV0dG9uPlxuICAgIDwvZGl2PmA7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURhdGEoZGF0YSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAoZGF0YVtpXS5pbl9yZXNlcnZlKSB7XG4gICAgICBjcmVhdGVSZXNlcnZlSXRlbShkYXRhLCBsaXN0LCBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3JlYXRlU2ltcGxlSXRlbShkYXRhLCBsaXN0LCBpKTtcbiAgICB9XG4gIH1cbn1cblxuY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgIHNob3dSZXNlcnZlSXRlbShsaXN0LCAncmVzZXJ2ZScpO1xuICB9IGVsc2Uge1xuICAgIHNob3dBbGxJdGVtKGxpc3QpO1xuICB9XG59KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgaWYgKGV2ZW50LnRhcmdldC5tYXRjaGVzKCcuc2VsZWN0LWJveF9fbGlzdCBsYWJlbCcpKSB7XG4gICAgY29uc3Qgc3RhdHVzID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1maWx0ZXInKTtcbiAgICBpZiAoc3RhdHVzID09PSAnYWNjZXB0Jykge1xuICAgICAgaGlkZUNoaWxkcmVuSXRlbShsaXN0KTtcbiAgICAgIHNob3dGaWx0ZXJJdGVtKGxpc3QsICdhY2NlcHQnKTtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3JlamVjdCcpIHtcbiAgICAgIGhpZGVDaGlsZHJlbkl0ZW0obGlzdCk7XG4gICAgICBzaG93RmlsdGVySXRlbShsaXN0LCAncmVqZWN0Jyk7XG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdhbGwnKSB7XG4gICAgICBoaWRlQ2hpbGRyZW5JdGVtKGxpc3QpO1xuICAgICAgc2hvd0ZpbHRlckl0ZW0obGlzdCwgJ2FsbCcpO1xuICAgIH1cbiAgfVxufSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnYnV0dG9uJykpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgaXRlbUlkID0gYnV0dG9uLnBhcmVudE5vZGUuaWQ7XG4gICAgY29uc3QgaXRlbSA9IGJ1dHRvbi5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgY29uc3QgYWNjZXB0TGluayA9IGBodHRwczovL3ByaXZhdGUtOWQ1ZTM3YS10ZXN0YXNzaWdubWVudC5hcGlhcnktbW9jay5jb20vcmVzb2x2ZS1iZWFyP2lkPSR7aXRlbUlkfWA7XG4gICAgY29uc3QgcmVqZWN0TGluayA9IGBodHRwczovL3ByaXZhdGUtOWQ1ZTM3YS10ZXN0YXNzaWdubWVudC5hcGlhcnktbW9jay5jb20vcmVqZWN0LWJlYXI/aWQ9JHtpdGVtSWR9YDtcblxuICAgIGlmIChidXR0b24uaWQgPT09ICdhY2NlcHQnKSB7XG4gICAgICBwb3N0RGF0YShpdGVtLCBidXR0b24sIGFjY2VwdExpbmssICdhY2NlcHQnKTtcbiAgICB9IGVsc2UgaWYgKGJ1dHRvbi5pZCA9PT0gJ3JlamVjdCcpIHtcbiAgICAgIHBvc3REYXRhKGl0ZW0sIGJ1dHRvbiwgcmVqZWN0TGluaywgJ3JlamVjdCcpO1xuICAgIH1cbiAgfVxufSk7XG5cbmdldERhdGEodXJsKVxuICAudGhlbihkYXRhID0+IGNyZWF0ZURhdGEoZGF0YS5yZXN1bHRzLmRhdGEpKVxuICAuY2F0Y2goKGVycikgPT4geyB0aHJvdyBlcnI7IH0pO1xuIl19
